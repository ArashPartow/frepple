/* frePPLe 4.0.0
Copyright (C) 2010-2019 by frePPLe bv

This library is free software; you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License as published
by the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

function BufferFactory(e,n,t,o){var a=!1;function r(e){e&&this.extend(e)}return r.prototype={extend:function(e){angular.extend(this,e)},get:function(){var t=this;return e.get(n()+"/api/input/buffer/"+encodeURIComponent(t.name)+"/").then(function(e){return a&&console.log("Buffer get '"+t.name+"': ",e.data),t.extend(e.data),t})},save:function(){var t=this;return e.put(n()+"/api/input/buffer/"+encodeURIComponent(t.name)+"/",t).then(function(e){return a&&console.log("Buffer save '"+t.name+"': ",e.data),t.extend(e.data),t})},remove:function(){var t=this;return e.delete(n()+"/api/input/buffer/"+encodeURIComponent(t.name)+"/").then(function(e){return a&&console.log("Buffer delete '"+t.name+"': ",e.data),t})}},r}function DemandFactory(e,n,t,o,a){var r=!1;function i(e){e&&this.extend(e)}return i.prototype={extend:function(e){angular.forEach(e,function(n,t){switch(t){case"due":moment.isMoment(n)||(e.due=moment(n));break;case"pegging":n.forEach(function(e,n){moment.isMoment(e.operationplan.start)||(e.operationplan.start=moment(e.operationplan.start)),moment.isMoment(e.operationplan.end)||(e.operationplan.end=moment(e.operationplan.end))});break;case"problems":case"constraints":n.forEach(function(e,n){moment.isMoment(e.start)||(e.start=moment(e.start)),moment.isMoment(e.end)||(e.end=moment(e.end))});break;case"maxlateness":e.maxlateness=n/86400}}),angular.extend(this,e)},getData:function(){var e={name:this.name};void 0!==this.quantity&&(e.quantity=this.quantity);void 0!==this.description&&(e.description=this.description);void 0!==this.category&&(e.category=this.category);void 0!==this.subcategory&&(e.subcategory=this.subcategory);void 0!==this.due&&(e.due=this.due.format("YYYY-MM-DDTHH:mm:ss"));void 0!==this.item&&this.item&&(e.item={name:this.item.name});void 0!==this.location&&this.location&&(e.location={name:this.location.name});void 0!==this.customer&&this.customer&&(e.customer={name:this.customer.name});void 0!==this.minshipment&&(e.minshipment=this.minshipment);void 0!==this.maxlateness&&(e.maxlateness=86400*this.maxlateness);void 0!==this.priority&&(e.priority=this.priority);return e},get:function(){var t=this;return e.get(n()+"/api/input/demand/"+encodeURIComponent(t.name)+"/").then(function(e){return r&&console.log("Demand get '"+t.name+"': ",e.data),t.extend(e.data),t})},save:function(){var t=this;return e.put(n()+"/api/input/demand/"+encodeURIComponent(t.name)+"/",t.getData()).then(function(e){return r&&console.log("Demand save '"+t.name+"': ",e.data),t.extend(e.data),t})},remove:function(){var t=this;return e.delete(n()+"/api/input/demand/"+encodeURIComponent(t.name)+"/").then(function(e){return r&&console.log("Demand delete '"+t.name+"': ",e.data),t.status="closed",t})},quote:function(){var t=this;return e.post(n()+"/quote/quote/",{demands:[t.getData()]}).then(function(e){return r&&console.log("Demand quote '"+t.name+"': ",e.data),t.extend(e.data.demands[0]),t})},cancel:function(){var t=this;return e.post(n()+"/quote/cancel/?name="+encodeURIComponent(t.name)).then(function(e){return r&&console.log("Demand '"+t.name+"' canceled"),t.status="closed",t})},inquiry:function(){var t=this;return t.status="inquiry",e.post(n()+"/quote/inquiry/",{demands:[t.getData()]}).then(function(e){return r&&console.log("Demand inquiry '"+t.name+"': ",e.data),t.extend(e.data.demands[0]),t})},confirm:function(){var t=this;return e.post(n()+"/quote/confirm/?name="+encodeURIComponent(t.name)).then(function(e){return r&&console.log("Demand '"+t.name+"' confirmed"),t.status="confirmed",t})},info:function(t){var o=this;return e.post(n()+"/quote/info/",[o.name]).then(function(e){return r&&console.log("Demand info '"+o.name+"': ",e.data),o.extend(e.data.demands[0]),o})}},i}function CustomerFactory(e,n){var t=!1;function o(e){e&&angular.extend(this,e)}return o.prototype={extend:function(e){angular.extend(this,e)},get:function(){var o=this;return e.get(n()+"/api/input/customer/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Customer get '"+o.name+"': ",e.data),o.extend(e.data),o})},save:function(){var o=this;return e.put(n()+"/api/input/customer/"+encodeURIComponent(o.name)+"/",o).then(function(e){return t&&console.log("Customer save '"+o.name+"': ",e.data),o.extend(e.data),o})},remove:function(){var o=this;return e.delete(n()+"/api/input/customer/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Customer delete '"+itm.name+"': ",e.data),o})}},o}function ItemFactory(e,n){var t=!1;function o(e){e&&this.extend(e)}return o.prototype={extend:function(e){angular.extend(this,e)},get:function(){var o=this;return e.get(n()+"/api/input/item/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Item get '"+o.name+"': ",e.data),o.extend(e.data),o})},save:function(){var o=this;return e.put(n()+"/api/input/item/"+encodeURIComponent(o.name)+"/",o).then(function(e){return t&&console.log("Item save '"+o.name+"': ",e.data),o.extend(e.data),o})},remove:function(){var o=this;return e.delete(n()+"/api/input/item/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Item delete '"+o.name+"': ",e.data),o})}},o}function LocationFactory(e,n){var t=!1;function o(e){e&&this.extend(e)}return o.prototype={extend:function(e){angular.extend(this,e)},get:function(){var o=this;return e.get(n()+"/api/input/location/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Location get '"+o.name+"': ",e.data),o.extend(e.data),o})},save:function(){var o=this;return e.put(n()+"/api/input/location/"+encodeURIComponent(o.name)+"/",o).then(function(e){return t&&console.log("Location save '"+o.name+"': ",e.data),o.extend(e.data),o})},remove:function(){var o=this;return e.delete(n()+"/api/input/location/"+encodeURIComponent(o.name)+"/").then(function(e){return t&&console.log("Location delete '"+o.name+"': ",e.data),o})}},o}function OperationFactory(e,n,t){var o=!1;function a(e){e&&this.extend(e)}return a.prototype={extend:function(e){angular.extend(this,e)},get:function(){var t=this;return e.get(n()+"/api/input/operation/"+encodeURIComponent(t.name)+"/").then(function(e){return o&&console.log("Operation get '"+t.name+"': ",e.data),t.extend(e.data),t})},save:function(){var t=this;return e.put(n()+"/api/input/operation/"+encodeURIComponent(t.name)+"/",t).then(function(e){return o&&console.log("Operation save '"+t.name+"': ",e.data),t.extend(e.data),t})},remove:function(){var t=this;return e.delete(n()+"/api/input/operation/"+encodeURIComponent(t.name)+"/").then(function(e){return o&&console.log("Operation delete '"+t.name+"': ",e.data),t})}},a}function OperationPlanFactory(e,n,t,o,a){var r=!1;function i(e){e&&this.extend(e)}return i.prototype={extend:function(e){angular.extend(this,e)},get:function(t){var o=this;return void 0===o.id?o:e.get(n()+"/operationplan/?reference="+encodeURIComponent(o.id)).then(function(e){return r&&(console.log("Operation get '"+o.id+"': "),console.log(e.data)),o.extend(e.data[0]),"function"==typeof t&&t(o),o},function(e){401==e.status&&location.reload()})},save:function(){var t=this;return e.put(n()+"/api/input/operationplan/?reference="+encodeURIComponent(t.name),t).then(function(e){return r&&console.log("OperationPlan save '"+t.name+"': ",e.data),t.extend(e.data),t},function(e){401==e.status&&location.reload()})},remove:function(){var t=this;return e.delete(n()+"/api/input/operationplan/?reference="+encodeURIComponent(t.name)).then(function(e){return r&&console.log("OperationPlan delete '"+t.name+"': ",e.data),t},function(e){401==e.status&&location.reload()})}},i}function ResourceFactory(e,n,t){var o=!1;function a(e){e&&this.extend(e)}return a.prototype={extend:function(e){angular.extend(this,e)},get:function(){var t=this;return e.get(n()+"/api/input/resource/"+encodeURIComponent(t.name)+"/").then(function(e){return o&&console.log("Resource get '"+t.name+"': ",e.data),t.extend(e.data),t})},save:function(){var t=this;return e.put(n()+"/api/input/resource/"+encodeURIComponent(red.name)+"/",t).then(function(e){return o&&console.log("Resource save '"+t.name+"': ",e.data),t.extend(e.data),t})},remove:function(){var t=this;return e.delete(n()+"/api/input/resource/"+encodeURIComponent(t)+"/").then(function(e){return o&&console.log("Resource delete '"+t.name+"': ",e.data),t})}},a}function ModelService(e,n,t,o,a,r){var i={demands:{},operations:{},items:{},locations:{},buffers:{},resources:{}};return{masterdata:i,load:function(u){for(var c in u.items)i.items[u.items[c].name]=new t(u.items[c]);for(var c in u.operations)i.operations[u.operations[c].name]=new a(u.operations[c]);for(var c in u.demands)i.demands[u.demands[c].name]=new n(u.demands[c]);for(var c in u.locations)i.locations[u.locations[c].name]=new o(u.locations[c]);for(var c in u.buffers)i.buffers[u.buffers[c].name]=new e(u.buffers[c]);for(var c in u.resources)i.resources[u.resources[c].name]=new r(u.resources[c])}}}angular.module("frepple.input",["frepple.common"]),angular.module("frepple.input").factory("Buffer",BufferFactory),BufferFactory.$inject=["$http","getURLprefix","Item","Location"],angular.module("frepple.input").factory("Demand",DemandFactory),DemandFactory.$inject=["$http","getURLprefix","Location","Item","Customer"],angular.module("frepple.input").factory("Customer",CustomerFactory),CustomerFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Item",ItemFactory),ItemFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Location",LocationFactory),LocationFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Operation",OperationFactory),OperationFactory.$inject=["$http","getURLprefix","Location"],angular.module("frepple.input").factory("OperationPlan",OperationPlanFactory),OperationPlanFactory.$inject=["$http","getURLprefix","Operation","Location","Item"],angular.module("frepple.input").factory("Resource",ResourceFactory),ResourceFactory.$inject=["$http","getURLprefix","Location"],angular.module("frepple.input").service("Model",ModelService),ModelService.$inject=["Buffer","Demand","Item","Location","Operation","Resource"];
//# sourceMappingURL=frepple-input.min.js.map